<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>sheyd</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<style>
    /* ========== Base ========== */
    :root {
      --bg-color: #121212;
      --text-color: #e0e0e0;
      --header-text: #bb86fc;
      --nav-link-color: #bbb;
      --nav-link-hover: #bb86fc;
      --btn-bg: #bb86fc;
      --btn-color: #121212; /* —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–æ–∫ (–Ω–∞ —Å–≤–µ—Ç–ª–æ–º —Ñ–æ–Ω–µ –±—É–¥–µ—Ç —Ç—ë–º–Ω—ã–º) */
      --btn-hover-bg: #9a67ea;
      --particle-color: rgba(187, 134, 252, 0.3);

      /* muted / secondary text colors (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–æ–≥–æ rgba(255,255,255,..)) */
      --muted-color: rgba(255,255,255,0.7);
      --muted-color-2: rgba(255,255,255,0.6);

      --header-height: 76px;
      --container-width: 900px;
    }

    *{box-sizing:border-box; margin:0; padding:0;}
    html,body{height:100%}
    body{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      background:var(--bg-color);
      color:var(--text-color);
      font-family:'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition:background-color .6s, color .6s;
      scroll-behavior:smooth;
    }
    body.light{
      --bg-color:#e6f0ff;
      --text-color:#222;          /* –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç –≤ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ ‚Äî —á—ë—Ä–Ω—ã–π */
      --header-text:#4b32a8;
      --btn-bg:#4b32a8;
      --btn-color:#121212;       /* –∫–Ω–æ–ø–∫–∏: —Ç—ë–º–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ */
      --btn-hover-bg:#6a4bca;
      --particle-color:rgba(75,50,168,0.25);

      /* –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º ¬´muted¬ª —Ü–≤–µ—Ç–∞ –¥–ª—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã */
      --muted-color: rgba(0,0,0,0.7);
      --muted-color-2: rgba(0,0,0,0.6);
    }

    a{color:inherit;text-decoration:none}

    /* ========== Header: fixed and perfectly centered block ========== */
    header{
      position:sticky;
      top:0;
      left:0;
      right:0;
      height:var(--header-height);
      display:grid;
      grid-template-columns: 1fr auto 1fr; /* left gap / center / right controls */
      align-items:center;
      z-index:20;
      background:transparent;
      backdrop-filter: blur(6px);
      padding: 0 20px;
      border-bottom:1px solid rgba(255,255,255,0.02);
    }

    /* center column - logo + nav grouped and centered */
    .center-wrap{
      grid-column:2;
      justify-self:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      pointer-events:auto;
    }

    .top-row{
      display:flex;
      align-items:center;
      gap:18px;
      justify-content:center;
      flex-wrap:wrap;
    }

    header h1{
      font-size:20px;
      font-weight:700;
      color:var(--header-text);
      letter-spacing:1.5px;
      cursor:pointer;
      user-select:none;
      margin:0;
    }

    nav{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }
    nav a{
      color:var(--nav-link-color);
      font-weight:500;
      padding:6px 8px;
      border-radius:6px;
      transition:color .2s, background .15s;
      font-size:14px;
    }
    nav a:hover, nav a.active{
      color:var(--nav-link-hover);
      background:rgba(255,255,255,0.02);
      border-bottom:2px solid var(--nav-link-hover);
      padding-bottom:4px;
    }

    /* right controls column */
    .header-right{
      grid-column:3;
      justify-self:end;
      display:flex;
      align-items:center;
      gap:8px;
      pointer-events:auto;
    }

    .chip{
      cursor:pointer;
      background:rgba(0,0,0,0.12);
      border:1px solid rgba(187,134,252,0.35);
      color:var(--header-text);
      font-weight:600;
      padding:6px 12px;
      border-radius:18px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      min-width:44px;
      height:36px;
      transition:background .15s,color .15s;
    }
    .chip:hover{ background:rgba(187,134,252,0.08); color:var(--btn-color) }

    /* ========== Main & container (content centered) ========== */
    main{
      margin-top: calc(var(--header-height) + 20px);
      display:flex;
      justify-content:center;
      width:100%;
      padding: 0 16px 60px;
      flex:1;
    }

    .container{
      width:100%;
      max-width:var(--container-width);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:36px;
    }

    section{
      width:100%;
      padding:48px 36px;
      border-radius:12px;
      background:transparent;
      display:flex;
      flex-direction:column;
      align-items:center;
      text-align:center;
      box-shadow:0 8px 30px rgba(0,0,0,0.35);
    }

    #main-scene h2{ font-size:28px; color:var(--header-text); margin-bottom:12px }
    #main-scene p{ font-size:16px; max-width:760px; color:var(--text-color) }

    .btn{
      margin-top:18px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 26px;
      border-radius:22px;
      background:var(--btn-bg);
      color:var(--btn-color);
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:1.6px;
      cursor:pointer;
      box-shadow:0 10px 30px rgba(154,103,234,0.12);
    }
    .btn:hover{ background:var(--btn-hover-bg) }

    footer{
      width:100%;
      max-width:var(--container-width);
      margin:28px auto 36px;
      text-align:center;
      color:var(--muted-color); /* –∑–∞–º–µ–Ω–∏–ª–∏ –∂—ë—Å—Ç–∫–∏–π rgba –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é */
      font-size:13px;
      padding:8px;
      border-top:1px solid rgba(255,255,255,0.03);
      border-radius:8px;
    }

    /* modal and toast */
    .secret-modal{
      position:fixed;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%) scale(.96);
      min-width:300px;
      background:linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.06);
      padding:20px;
      border-radius:12px;
      box-shadow:0 10px 40px rgba(0,0,0,0.6);
      display:none;
      z-index:1200;
    }
    .secret-modal.show{ display:block; transform:translate(-50%,-50%) scale(1) }

    #toast{
      position:fixed;
      right:18px;
      bottom:18px;
      background:rgba(0,0,0,0.78);
      color:#fff;
      padding:10px 14px;
      border-radius:10px;
      opacity:0;
      transform:translateY(8px);
      transition:opacity .18s, transform .18s;
      z-index:2000;
      pointer-events:none;
    }
    #toast.show{ opacity:1; transform:translateY(0); pointer-events:auto }

    /* Achievements list styling (kept) */
    .ach-list{ width:100%; max-width:700px; background:rgba(255,255,255,0.02); padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,0.03) }

    /* ========== Info section layout: left info + right suggestions ========== */
    #info .info-grid{
      width:100%;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:20px;
      align-items:start;
    }

    #info .info-left{
      text-align:left;
      padding:8px 12px;
    }
    #info .info-left h3{ margin-top:0; color:var(--header-text) }
    #info .info-right{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:12px;
      border-radius:10px;
      text-align:left;
    }

    .suggestion-form textarea{
      width:100%;
      min-height:96px;
      padding:10px;
      resize:vertical;
      border-radius:8px;
      background:rgba(0,0,0,0.18);
      border:1px solid rgba(255,255,255,0.04);
      color:var(--text-color);
      font-family:inherit;
      font-size:14px;
    }
    .suggestion-form .row{ display:flex; gap:8px; margin-top:10px; }
    .suggestion-form .row input[type="text"]{
      flex:1;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background:rgba(0,0,0,0.12);
      color:var(--text-color);
    }
    .suggestion-form button[type="submit"]{
      padding:8px 12px;
      border-radius:8px;
      background:var(--btn-bg);
      color:var(--btn-color);
      border:none;
      cursor:pointer;
      font-weight:700;
    }

    .suggestions-list{
      margin-top:12px;
      max-height:240px;
      overflow:auto;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .suggestion-item{
      padding:8px;
      background:rgba(0,0,0,0.22);
      border-radius:8px;
      font-size:14px;
      color:var(--text-color);
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
    }
    .suggestion-item .meta{
      font-size:12px;
      color:var(--muted-color-2); /* –∑–∞–º–µ–Ω–∏–ª–∏ –∂—ë—Å—Ç–∫–∏–π rgba */
      margin-bottom:6px;
    }
    .suggestion-item button { background:transparent;border:none;color:var(--nav-link-hover);cursor:pointer;font-weight:600 }

    /* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... */

    @media (max-width:720px){
      :root{ --header-height:72px; --container-width:95vw }
      .center-wrap{ gap:4px }
      .top-row{ gap:10px }
      section{ padding:28px }
      #main-scene h2{ font-size:20px }
      nav a{ font-size:13px; padding:6px 6px }
      .header-right{ gap:6px }

      /* stack info + suggestions on mobile */
      #info .info-grid{ grid-template-columns: 1fr; }
      #info .info-left{ text-align:center }
      #info .info-right{ margin-top:8px }
    }
  </style>
<style>
/* –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π */
@media (max-width: 600px) {
  .suggestion-form textarea,
  .suggestion-form input[type="text"] {
    width: 100% !important;
    font-size: 16px;
  }
  .suggestion-form .row {
    flex-direction: column;
    gap: 8px;
  }
  .suggestion-form button {
    width: 100%;
    font-size: 16px;
    padding: 10px;
  }
  .info-right {
    padding: 10px;
  }
  #suggestionsList {
    font-size: 15px;
  }
  .chip {
    font-size: 15px !important;
    padding: 8px 12px !important;
  }
}
</style></head>
<body>
<!-- Canvas –¥–ª—è —á–∞—Å—Ç–∏—Ü -->
<canvas aria-hidden="true" id="particles-canvas" style="position:fixed;inset:0;z-index:0;pointer-events:none"></canvas>
<!-- Header: center-block in middle column -->
<header>
<div></div> <!-- empty left column for symmetry -->
<div aria-label="–ì–ª–∞–≤–Ω–∞—è —à–∞–ø–∫–∞" class="center-wrap" role="banner">
<div class="top-row">
<h1 id="logo">sheyd</h1>
<nav aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
<a class="active" href="#main-scene">–ì–ª–∞–≤–Ω–∞—è</a>
<a href="#status">–°—Ç–∞—Ç—É—Å</a>
<a href="#info">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
</nav>
</div>
<div style="display:flex;gap:8px;align-items:center;">
<!-- visual balance -->
</div>
</div>
<div aria-hidden="false" class="header-right">
<button aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" class="chip" id="theme-toggle">–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</button>
<button aria-label="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è" class="chip" id="ach-open" title="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è">üèÜ</button>
<button class="chip" id="reset-storage" title="–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å">–°–±—Ä–æ—Å</button>
</div>
</header>
<main>
<div class="container">
<section aria-label="–ì–ª–∞–≤–Ω–∞—è —Å—Ü–µ–Ω–∞" id="main-scene" tabindex="-1">
<h2>Sheyd</h2>
<p>–ü—Ä–æ–µ–∫—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å –ª—é–±–æ–≤—å—é –∏ –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ –¥–µ—Ç–∞–ª—è–º. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.</p>
<a aria-label="–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Discord —Å–µ—Ä–≤–µ—Ä" class="btn" href="https://discord.gg/4muNVxCegd" rel="noopener noreferrer" target="_blank">–ü–ï–†–ï–ô–¢–ò</a>
</section>
<section aria-label="–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞" id="status" style="display:none;" tabindex="-1">
<h2>–° –∫–æ–Ω—Ü–∞ —Å–µ–∑–æ–Ω–∞ –ø—Ä–æ—à–ª–æ</h2>
<div id="time-since-season" style="font-weight:700;color:var(--header-text);margin-top:6px"></div>
<div aria-atomic="true" aria-live="polite" id="countdown" style="font-weight:800;font-size:24px;margin-top:8px;color:var(--header-text)"></div>
</section>
<!-- Info section now contains two columns: left = info, right = suggestions -->
<section aria-label="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" id="info" style="display:none;" tabindex="-1">
<div class="info-grid">
<div class="info-left">
<h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
<h3>–û –ø—Ä–æ–µ–∫—Ç–µ</h3>
<p>Sheyd - –º–æ–¥–æ–≤—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä. –ó–¥–µ—Å—å —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∏–¥–µ–∏ –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p>
<div style="margin-top:14px">
<p aria-atomic="true" aria-live="polite" id="typing-text" style="margin-top:8px"></p>
</div>
<div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
<a class="btn" href="https://discord.gg/4muNVxCegd" rel="noopener noreferrer" target="_blank">Discord</a>
<a class="btn" href="https://www.youtube.com/@Sheyd_s" rel="noopener noreferrer" target="_blank">YouTube</a>
<a class="btn" href="https://t.me/sheydmini" rel="noopener noreferrer" target="_blank">Telegram</a>
</div>
</div>
<aside aria-label="–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" class="info-right">
<h3 style="margin-top:0">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h3>
<p style="font-size:13px;color:var(--muted-color);margin-bottom:8px">
    –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∏–¥–µ—è–º–∏, —á—Ç–æ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –≤–∏–¥–µ—Ç—å –Ω–∞ —Å–∞–π—Ç–µ ‚Äî –≤–∞—à–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É–≤–∏–¥—è—Ç –≤—Å–µ!
  </p>
<form aria-label="–§–æ—Ä–º–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π" class="suggestion-form" id="suggestionForm">
<textarea id="suggestionInput" maxlength="1000" placeholder="–û–ø–∏—à–∏—Ç–µ –∏–¥–µ—é –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏–µ..." required=""></textarea>
<div class="row" style="margin-top:8px">
<input id="suggestionName" maxlength="60" placeholder="–ò–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" type="text"/>
<button aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ" type="submit">üí° –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–¥–µ—é</button>
</div>
</form>
<div style="margin-top:12px; font-size:13px; color:var(--muted-color)">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</div>
<div aria-atomic="true" aria-live="polite" class="suggestions-list" id="suggestionsList"></div>
<div style="margin-top:10px; display:flex; gap:8px;">
<button class="chip" id="clearSuggestions" style="padding:6px 10px;font-size:13px">–û—á–∏—Å—Ç–∏—Ç—å</button>
<div id="suggestionsCount" style="margin-left:auto;font-size:13px;color:var(--muted-color)">0</div>
</div>
</aside>
</div>
</section>
<section aria-label="–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Å–µ–∫—Ü–∏—è" id="secret-section" style="display:none;" tabindex="-1">
<h2>üéâ –°–µ–∫—Ä–µ—Ç–Ω–∞—è —Å–µ–∫—Ü–∏—è</h2>
<p>–í—ã –≤–≤–µ–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∫–ª–∞–≤–∏—à ‚Äî –ø–æ–∑–¥—Ä–∞–≤–ª—è—é!
        <p>–í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –ø–æ–∑–∂–µ, –∏ –∑–¥–µ—Å—å —Ç–æ—á–Ω–æ —á—Ç–æ-—Ç–æ –±—É–¥–µ—Ç.</p>
</p>
<div style="margin-top:12px"><button class="btn" id="secret-back">–í–µ—Ä–Ω—É—Ç—å—Å—è</button></div>
</section>
<section aria-label="SHEYD —Å–µ–∫—Ü–∏—è" id="sheyd-section" style="display:none;" tabindex="-1">
<h2>üîê SHEYD</h2>
<p>–í—ã –≤–≤–µ–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é <strong>S H E Y D</strong> ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞!</p>
<p>–í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –ø–æ–∑–∂–µ, –∏ –∑–¥–µ—Å—å —Ç–æ—á–Ω–æ —á—Ç–æ-—Ç–æ –±—É–¥–µ—Ç.</p>
<div style="margin-top:12px"><button class="btn" id="sheyd-back">–í–µ—Ä–Ω—É—Ç—å—Å—è</button></div>
</section>
<section aria-label="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è" id="achievements" style="display:none;" tabindex="-1">
<h2>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
<div aria-live="polite" class="ach-list" id="ach-list" style="margin-top:12px"></div>
<div style="margin-top:12px"><button class="btn" id="ach-back">–í–µ—Ä–Ω—É—Ç—å—Å—è</button></div>
</section>
<section aria-label="–ë–æ–Ω—É—Å–Ω–∞—è —Å–µ–∫—Ü–∏—è" id="bonus-section" style="display:none;" tabindex="-1">
<h2>üîí –ë–æ–Ω—É—Å–Ω–∞—è —Å–µ–∫—Ü–∏—è</h2>
<p>–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π (PAGE).</p>
<p>–í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –ø–æ–∑–∂–µ, –∏ –∑–¥–µ—Å—å —Ç–æ—á–Ω–æ —á—Ç–æ-—Ç–æ –±—É–¥–µ—Ç.</p>
<div style="margin-top:12px"><button class="btn" id="bonus-back">–í–µ—Ä–Ω—É—Ç—å—Å—è</button></div>
</section>
</div>
</main>
<footer id="page-footer">
<p>¬© 2025 Sheyd - –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è</p>
<p>unknown stuff</p>
</footer>
<!-- modal & toast -->
<div aria-hidden="true" aria-modal="true" class="secret-modal" id="secret-modal" role="dialog">
<h3>üéâ –°–µ–∫—Ä–µ—Ç –æ—Ç–∫—Ä—ã—Ç!</h3>
<p>–¢—ã –Ω–∞–∂–∞–ª –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø 10 —Ä–∞–∑ ‚Äî –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! –í–æ—Ç —Ç–≤–æ–π —Å–µ–∫—Ä–µ—Ç: <strong>‚ú® –£–¥–∞—á–∏ –∏ —Ö–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è!</strong></p>
<p>–í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –ø–æ–∑–∂–µ, –∏ –∑–¥–µ—Å—å —Ç–æ—á–Ω–æ —á—Ç–æ-—Ç–æ –±—É–¥–µ—Ç.</p>
<div style="margin-top:12px"><button class="btn" id="close-secret">–ó–∞–∫—Ä—ã—Ç—å</button></div>
</div>
<div aria-live="polite" id="toast" role="status"></div>
<script>
    // ----------------- –£—Ç–∏–ª–∏—Ç—ã -----------------
    function showToast(text, timeout = 3000) {
      const t = document.getElementById('toast');
      if (!t) return;
      t.textContent = text;
      t.classList.add('show');
      clearTimeout(t._to);
      t._to = setTimeout(() => t.classList.remove('show'), timeout);
    }

    function safeGet(key, def) {
      try {
        const raw = localStorage.getItem(key);
        if (raw === null) return def;
        try { return JSON.parse(raw); } catch (e) {
          if (typeof def === 'string' || typeof def === 'number') return raw;
          localStorage.removeItem(key);
          return def;
        }
      } catch (e) {
        return def;
      }
    }
    function safeSet(key, val) {
      try {
        localStorage.setItem(key, JSON.stringify(val));
      } catch (e) {
        console.warn('safeSet failed for', key, e);
      }
    }

    // ----------------- Theme -----------------
    const themeToggleBtn = document.getElementById('theme-toggle');
    function setTheme(theme) {
      if (!themeToggleBtn) return;
      if (theme === 'light') {
        document.body.classList.add('light');
        themeToggleBtn.textContent = '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞';
      } else {
        document.body.classList.remove('light');
        themeToggleBtn.textContent = '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
      }
      try { localStorage.setItem('theme', theme); } catch(e){}
    }
    if (themeToggleBtn) {
      themeToggleBtn.addEventListener('click', () => {
        const currentTheme = document.body.classList.contains('light') ? 'light' : 'dark';
        setTheme(currentTheme === 'light' ? 'dark' : 'light');
      });
    }
    const savedTheme = (function(){ try{return localStorage.getItem('theme')}catch(e){return null}})();
    if (savedTheme) setTheme(savedTheme);
    else setTheme('dark');

    // ----------------- Navigation -----------------
    const navLinks = document.querySelectorAll('nav a');
    const sections = document.querySelectorAll('main section');

    function renderSuggestions() {
      // Render local immediately as placeholder; firebase listener (if available) will replace it when ready
      renderLocalSuggestions();
    }

    function showSectionById(id) {
      sections.forEach(sec => {
        if (sec.id === id) sec.style.display = 'flex';
        else sec.style.display = 'none';
      });
      navLinks.forEach(a => a.classList.remove('active'));
      const link = Array.from(navLinks).find(a => a.getAttribute('href').substring(1) === id);
      if (link) link.classList.add('active');

      // When info opened: start typing and render suggestions
      if (id === 'info') {
        startTypingAnimation();
        if (typeof renderSuggestions === 'function') renderSuggestions();
      }
    }

    navLinks.forEach(link => link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = link.getAttribute('href').substring(1);
      showSectionById(targetId);
    }));

    // ----------------- Suggestions: Firebase-backed with local-first fallback -----------------
    const firebaseConfig = {
      apiKey: "AIzaSyAumrOiYVSFcqzWV9uM5-E_lZA80XpfDZg",
      authDomain: "sheyd-f7e36.firebaseapp.com",
      databaseURL: "https://sheyd-f7e36-default-rtdb.firebaseio.com",
      projectId: "sheyd-f7e36",
      storageBucket: "sheyd-f7e36.firebasestorage.app",
      messagingSenderId: "534336964574",
      appId: "1:534336964574:web:fdc015c5726dface1aff4f",
      measurementId: "G-SW46F9KY83"
    };
    const useFirebase = !!(firebaseConfig && firebaseConfig.apiKey && firebaseConfig.databaseURL);

    // local storage key
    const SUG_KEY = 'siteSuggestions';

    // queue to hold entries that should be sent to firebase when it becomes available
    const suggestionsQueue = [];

    // add single suggestion item to UI (used by both renderers)
    function addSuggestionToUI(s, container) {
      const listEl = container || document.getElementById('suggestionsList');
      if (!listEl) return;
      const item = document.createElement('div');
      item.className = 'suggestion-item';
      const left = document.createElement('div');
      left.style.flex = '1';
      const meta = document.createElement('div');
      meta.className = 'meta';
      const name = s.name ? s.name : '–ê–Ω–æ–Ω–∏–º';
      meta.textContent = `${name} ‚Ä¢ ${s.ts ? new Date(s.ts).toLocaleString() : ''}`;
      const txt = document.createElement('div');
      txt.textContent = s.text;
      left.appendChild(meta);
      left.appendChild(txt);

      const right = document.createElement('div');
      right.style.display = 'flex';
      right.style.flexDirection = 'column';
      right.style.alignItems = 'flex-end';
      right.style.gap = '6px';

      const del = document.createElement('button');
      del.type = 'button';
      del.title = '–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ';
      del.textContent = '–£–¥–∞–ª–∏—Ç—å';
      del.addEventListener('click', () => {
        if (useFirebase && s._key) {
          if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–∞?')) {
            import('https://www.gstatic.com/firebasejs/12.1.0/firebase-database.js').then(dbMod => {
              const { getDatabase, ref, remove } = dbMod;
              const db = getDatabase(window.__firebaseApp);
              remove(ref(db, 'suggestions/' + s._key)).then(() => {
                showToast('–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞ (—Å–µ—Ä–≤–µ—Ä).', 1600);
              }).catch(err => {
                console.error(err);
                showToast('–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–∞–∑—ã).', 2000);
              });
            });
          }
        } else {
          const arr = safeGet(SUG_KEY, []);
          const newArr = arr.filter(it => it.ts !== s.ts || (it.text !== s.text));
          safeSet(SUG_KEY, newArr);
          renderLocalSuggestions();
          showToast('–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ (–ª–æ–∫–∞–ª—å–Ω–æ)', 1400);
        }
      });

      right.appendChild(del);
      item.appendChild(left);
      item.appendChild(right);
      listEl.appendChild(item);
    }

    // ---------- LocalStorage renderer (fallback) ----------
    function loadLocalSuggestions() {
      const arr = safeGet(SUG_KEY, []);
      if (!Array.isArray(arr)) return [];
      return arr;
    }
    function saveLocalSuggestions(arr) { safeSet(SUG_KEY, arr); }
    function renderLocalSuggestions() {
      const listEl = document.getElementById('suggestionsList');
      const countEl = document.getElementById('suggestionsCount');
      if (!listEl || !countEl) return;
      const arr = loadLocalSuggestions();
      listEl.innerHTML = '';
      if (arr.length === 0) {
        listEl.innerHTML = '<div style="color:var(--muted-color-2);font-size:13px">–ï—â—ë –Ω–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π ‚Äî –±—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</div>';
      } else {
        arr.slice().reverse().forEach(s => addSuggestionToUI(s));
      }
      countEl.textContent = arr.length;
    }

    // ---------- Provide a submitSuggestionRemote immediately (local-first) ----------
    // This function always returns a Promise, so the form handler can chain .then(...)
    window.submitSuggestionRemote = function(text, name) {
      const entry = { text, name: name||null, ts: Date.now() };
      // save locally first
      const arr = loadLocalSuggestions();
      arr.push(entry);
      saveLocalSuggestions(arr);
      renderLocalSuggestions();
      // queue for remote push (if/when firebase becomes available)
      suggestionsQueue.push(entry);
      showToast('–°–ø–∞—Å–∏–±–æ! –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –±—É–¥–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ.', 1800);
      return Promise.resolve();
    };

    // ---------- Firebase integration ----------
    if (useFirebase) {
      (async () => {
        try {
          const appMod = await import('https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js');
          const dbMod = await import('https://www.gstatic.com/firebasejs/12.1.0/firebase-database.js');
          const { initializeApp } = appMod;
          const { getDatabase, ref, onValue, push, remove } = dbMod;
          const firebaseApp = initializeApp(firebaseConfig);
          window.__firebaseApp = firebaseApp;
          const db = getDatabase(firebaseApp);
          const suggestionsRef = ref(db, 'suggestions');

          // Listener: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ä–µ–Ω–¥–µ—Ä–∏–º —Å–ø–∏—Å–æ–∫ –∑–∞–Ω–æ–≤–æ (—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
          onValue(suggestionsRef, snapshot => {
            const listEl = document.getElementById('suggestionsList');
            const countEl = document.getElementById('suggestionsCount');
            if (!listEl || !countEl) return;
            listEl.innerHTML = '';
            const val = snapshot.val() || {};
            const items = Object.keys(val).map(k => Object.assign({}, val[k], { _key: k }));
            // —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
            items.sort((a,b) => (b.ts || 0) - (a.ts || 0));
            if (items.length === 0) {
              listEl.innerHTML = '<div style="color:var(--muted-color-2);font-size:13px">–ï—â—ë –Ω–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π ‚Äî –±—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</div>';
            } else {
              items.forEach(it => addSuggestionToUI(it));
            }
            countEl.textContent = items.length;
          });

          // Replace submit function with real remote push, but keep local-first semantics
          window.submitSuggestionRemote = async function(text, name) {
            const entry = { text, name: name||null, ts: Date.now() };
            // already saved locally by earlier default; ensure local storage contains it
            const arr = loadLocalSuggestions();
            if (!arr.some(e => e.ts === entry.ts && e.text === entry.text)) {
              arr.push(entry);
              saveLocalSuggestions(arr);
              renderLocalSuggestions();
            }
            // push to remote
            try {
              await push(ref(db, 'suggestions'), entry);
              showToast('–°–ø–∞—Å–∏–±–æ! –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.', 1600);
              return Promise.resolve();
            } catch (err) {
              console.error('push error', err);
              // queue for later
              suggestionsQueue.push(entry);
              showToast('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Firebase ‚Äî –∑–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∞.', 2000);
              return Promise.reject(err);
            }
          };

          // function to flush queued entries
          async function flushQueue() {
            while (suggestionsQueue.length > 0) {
              const e = suggestionsQueue.shift();
              try {
                await push(ref(db, 'suggestions'), e);
                // ok
              } catch (err) {
                console.error('flush error', err);
                // push back and stop trying now
                suggestionsQueue.unshift(e);
                break;
              }
            }
          }

          // try to flush queued entries once firebase is ready
          flushQueue().catch(err => { console.warn('Could not flush suggestions queue now', err); });

          // expose clear remote
          window.clearAllRemoteSuggestions = async function() {
            try {
              await remove(ref(db, 'suggestions'));
              showToast('–í—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ).', 1800);
            } catch (err) {
              console.error(err);
              showToast('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞).', 2000);
            }
          };

        } catch (err) {
          console.error('Firebase init failed', err);
          showToast('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Firebase ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.', 2500);
          // if firebase fails, we already have a local submitSuggestionRemote defined above
          renderLocalSuggestions();
        }
      })();
    } else {
      // no firebase config ‚Äî local fallback already provided; render now
      renderLocalSuggestions();
    }

    // --------------- Form handling ----------------
    const suggestionForm = document.getElementById('suggestionForm');
    const suggestionInput = document.getElementById('suggestionInput');
    const suggestionName = document.getElementById('suggestionName');
    const clearBtn = document.getElementById('clearSuggestions');

    if (suggestionForm) {
      suggestionForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const text = (suggestionInput.value || '').trim();
        const name = (suggestionName.value || '').trim();
        if (!text) {
          showToast('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è', 1600);
          return;
        }
        if (text.length > 1000) {
          showToast('–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (–º–∞–∫—Å 1000 —Å–∏–º–≤–æ–ª–æ–≤)', 1800);
          return;
        }
        // submitSuggestionRemote always exists and returns a Promise
        try {
          window.submitSuggestionRemote(text, name)
            .then(() => {
              suggestionInput.value = '';
              suggestionName.value = '';
            })
            .catch(() => {
              suggestionInput.value = '';
              suggestionName.value = '';
            });
        } catch (err) {
          // fallback: save locally
          const entry = { text, name: name||null, ts: Date.now() };
          const arr = loadLocalSuggestions();
          arr.push(entry);
          saveLocalSuggestions(arr);
          renderLocalSuggestions();
          suggestionInput.value = '';
          suggestionName.value = '';
          showToast('–°–ø–∞—Å–∏–±–æ! –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ', 1800);
        }
      });
    }

    if (clearBtn) {
      clearBtn.addEventListener('click', () => {
        if (!confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏.')) return;
        if (useFirebase && typeof window.clearAllRemoteSuggestions === 'function') {
          window.clearAllRemoteSuggestions();
        }
        saveLocalSuggestions([]);
        renderLocalSuggestions();
        showToast('–õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—á–∏—â–µ–Ω—ã', 1600);
      });
    }

    // ----------------- Controls & other behaviors (kept) -----------------
    document.getElementById('ach-open')?.addEventListener('click', () => { showSectionById('achievements'); populateAchievements(); });
    document.getElementById('ach-back')?.addEventListener('click', () => showSectionById('main-scene'));
    document.getElementById('secret-back')?.addEventListener('click', () => showSectionById('main-scene'));
    document.getElementById('sheyd-back')?.addEventListener('click', () => showSectionById('main-scene'));
    document.getElementById('bonus-back')?.addEventListener('click', () => showSectionById('main-scene'));

    // Visits & achievements (kept)
    (function initVisits() {
      let visitsRaw = null;
      try { visitsRaw = localStorage.getItem('visits'); } catch(e) { visitsRaw = null; }
      let visitsNum = 0;
      if (visitsRaw === null) visitsNum = 0;
      else {
        const parsed = parseInt(visitsRaw, 10);
        visitsNum = Number.isNaN(parsed) ? 0 : parsed;
      }
      visitsNum++;
      try { localStorage.setItem('visits', String(visitsNum)); } catch(e){}
      window.__visits = visitsNum;
    })();
    let visits = window.__visits || 0;

    const ACH_KEYS = { visited100: 'visited100', found3eggs: 'found3eggs' };
    let achievementsState = safeGet('achievementsState', { visited100:false, found3eggs:false, eggs: [], dates: {} });
    if (!achievementsState[ACH_KEYS.visited100] && visits >= 100) {
      achievementsState[ACH_KEYS.visited100] = true;
      achievementsState.dates = achievementsState.dates || {};
      achievementsState.dates[ACH_KEYS.visited100] = new Date().toLocaleString();
      safeSet('achievementsState', achievementsState);
      showToast('üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: –ø–æ—Å–µ—Ç–∏–ª —Å–∞–π—Ç 100 —Ä–∞–∑');
    } else { safeSet('achievementsState', achievementsState); }

    function markEgg(id, title) {
      const state = safeGet('achievementsState', { visited100:false, found3eggs:false, eggs: [], dates: {} });
      state.eggs = state.eggs || [];
      if (!state.eggs.includes(id)) {
        state.eggs.push(id);
        if (id === 'footer') startFooterScramble();
        if (!state.found3eggs && state.eggs.length >= 3) {
          state.found3eggs = true;
          state.dates = state.dates || {};
          state.dates.found3eggs = new Date().toLocaleString();
          showToast('üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: –Ω–∞—à—ë–ª 3 –ø–∞—Å—Ö–∞–ª–∫–∏', 3000);
        }
        safeSet('achievementsState', state);
        showToast('‚ú® –ü–∞—Å—Ö–∞–ª–∫–∞ –Ω–∞–π–¥–µ–Ω–∞: ' + title, 2200);
        populateAchievements();
      }
    }

    // Footer scramble
    const footerEl = document.getElementById('page-footer');
    let footerScrambleInterval = null;
    let footerOriginalParagraphs = [];
    let footerScrambleActive = false;
    function randomSymbolString(len) {
      const chars = '‚ï≥‚ú∂‚òÖ‚ú¶‚ú∫‚úª‚úº‚Ä¢‚ó¶¬§‚ô¶‚ô¢‚ôß‚ò∞‚òØ‚ú™‚ú∑‚úπ‚ú∏‚ú∫‚úª‚úΩ‚úæ@$%&*?=+~<>/\\|[]{}0123456789';
      let out = '';
      for (let i = 0; i < len; i++) out += chars.charAt(Math.floor(Math.random() * chars.length));
      return out;
    }
    function startFooterScramble(duration = 8000, speed = 160) {
      if (!footerEl || footerScrambleActive) return;
      footerScrambleActive = true;
      const ps = footerEl.querySelectorAll('p');
      footerOriginalParagraphs = Array.from(ps).map(p => p.textContent);
      footerScrambleInterval = setInterval(() => {
        const ps2 = footerEl.querySelectorAll('p');
        ps2.forEach((p, idx) => {
          const len = Math.max(6, Math.min(22, footerOriginalParagraphs[idx] ? footerOriginalParagraphs[idx].length : 10));
          p.textContent = randomSymbolString(Math.floor(Math.random() * (len - 3)) + 3);
        });
        footerEl.style.transform = `translateY(${(Math.random()-0.5)*2}px) rotate(${(Math.random()-0.5)*0.5}deg)`;
      }, speed);
      setTimeout(() => {
        clearInterval(footerScrambleInterval);
        const ps3 = footerEl.querySelectorAll('p');
        ps3.forEach((p, idx) => p.textContent = footerOriginalParagraphs[idx] || p.textContent);
        footerEl.style.transform = '';
        footerScrambleActive = false;
      }, duration);
    }

    // Footer dblclick egg
    footerEl?.addEventListener('dblclick', () => { markEgg('footer','–§—É—Ç–µ—Ä (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫)'); showToast('‚ú® –ü–∞—Å—Ö–∞–ª–∫–∞ –Ω–∞–π–¥–µ–Ω–∞: –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ —Ñ—É—Ç–µ—Ä—É',2000); });

    // Logo easter (10 clicks)
    const logo = document.getElementById('logo');
    const secretModal = document.getElementById('secret-modal');
    const closeSecretBtn = document.getElementById('close-secret');
    let logoClickCount = 0, secretShown = false;
    if (logo) {
      logo.addEventListener('click', () => {
        logoClickCount++;
        if (logoClickCount === 10 && !secretShown) {
          secretModal.classList.add('show');
          secretModal.setAttribute('aria-hidden', 'false');
          secretShown = true;
          markEgg('logo', '–õ–æ–≥–æ—Ç–∏–ø (10 –∫–ª–∏–∫–æ–≤)');
        }
      });
    }
    closeSecretBtn?.addEventListener('click', ()=>{ secretModal.classList.remove('show'); secretModal.setAttribute('aria-hidden','true') });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { secretModal.classList.remove('show'); secretModal.setAttribute('aria-hidden','true') } });

    // Reset logo counter after inactivity
    (function(){
      if(!logo) return;
      let last=0;
      logo.addEventListener('click', ()=>{ const now=Date.now(); if(last && (now-last)>30000) logoClickCount=1; last=now });
    })();

    // Secret combos (Konami, ACH, PAGE, SHEYD)
    const konamiSequence = ['arrowup','arrowup','arrowdown','arrowdown','arrowleft','arrowright','arrowleft','arrowright'];
    let konamiIndex = 0;
    const comboACH = ['a','c','h']; let achIndex = 0;
    const comboPAGE = ['p','a','g','e']; let pageIndex = 0;
    const comboSHEY = ['s','h','e','y','d']; let sheyIndex = 0;

    document.addEventListener('keydown', (e) => {
      const target = e.target;
      if (target && (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable)) return;
      const key = (e.key || '').toLowerCase();

      // KONAMI
      if (key === konamiSequence[konamiIndex]) {
        konamiIndex++;
        if (konamiIndex === konamiSequence.length) {
          konamiIndex = 0;
          showSectionById('secret-section');
          markEgg('konami', 'Konami Code (‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚Üí)');
          showToast('–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Å–µ–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞!');
        }
      } else { konamiIndex = (key === konamiSequence[0]) ? 1 : 0; }

      // ACH
      if (key === comboACH[achIndex]) {
        achIndex++;
        if (achIndex === comboACH.length) { achIndex=0; showSectionById('achievements'); populateAchievements(); showToast('–û—Ç–∫—Ä—ã—Ç—ã –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (—Å–µ–∫—Ä–µ—Ç: A C H)'); }
      } else { achIndex = (key === comboACH[0]) ? 1 : 0; }

      // PAGE
      if (key === comboPAGE[pageIndex]) {
        pageIndex++;
        if (pageIndex === comboPAGE.length) { pageIndex=0; showSectionById('bonus-section'); showToast('–û—Ç–∫—Ä—ã—Ç–∞ –±–æ–Ω—É—Å–Ω–∞—è —Å–µ–∫—Ü–∏—è (—Å–µ–∫—Ä–µ—Ç: PAGE)'); }
      } else { pageIndex = (key === comboPAGE[0]) ? 1 : 0; }

      // SHEYD
      if (key === comboSHEY[sheyIndex]) {
        sheyIndex++;
        if (sheyIndex === comboSHEY.length) { sheyIndex=0; showSectionById('sheyd-section'); markEgg('sheyd','–ö–æ–º–±–∏–Ω–∞—Ü–∏—è SHEYD'); showToast('–û—Ç–∫—Ä—ã—Ç–∞ —Å–µ–∫—Ü–∏—è SHEYD (—Å–µ–∫—Ä–µ—Ç: S H E Y D)'); }
      } else { sheyIndex = (key === comboSHEY[0]) ? 1 : 0; }
    });

    // Achievements UI
    const ACHS = [
      { id: 'found3eggs', title: '–ù–∞—à—ë–ª 3 –ø–∞—Å—Ö–∞–ª–∫–∏', desc: '–ù–∞–π–¥–∏ 3 —Å–∫—Ä—ã—Ç—ã–µ –ø–∞—Å—Ö–∞–ª–∫–∏ –Ω–∞ —Å–∞–π—Ç–µ' },
      { id: 'visited100', title: '–ü–æ—Å–µ—Ç–∏–ª —Å–∞–π—Ç 100 —Ä–∞–∑', desc: '–û—Ç–∫—Ä–æ–π —Å–∞–π—Ç 100 —Ä–∞–∑' }
    ];
    function populateAchievements() {
      const list = document.getElementById('ach-list');
      if (!list) return;
      list.innerHTML = '';
      const state = safeGet('achievementsState', { visited100:false, found3eggs:false, eggs:[], dates:{} });
      ACHS.forEach(a => {
        const unlocked = !!state[a.id];
        const item = document.createElement('div');
        item.style.display='flex'; item.style.justifyContent='space-between'; item.style.alignItems='center';
        item.style.padding='12px'; item.style.borderBottom='1px dashed rgba(255,255,255,0.03)';
        item.innerHTML = `
          <div style="text-align:left">
            <div style="font-weight:700">${a.title}</div>
            <div style="font-size:13px;color:var(--muted-color-2)">${a.desc}</div>
          </div>
          <div style="text-align:right">
            <div style="padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.04);font-weight:600">${unlocked ? 'Unlocked' : 'Locked'}</div>
            ${unlocked ? '<div style="font-size:12px;margin-top:6px;color:var(--muted-color)">' + (state.dates && (state.dates[a.id] || state.dates[a.id + '_date']) ? (state.dates[a.id] || state.dates[a.id + '_date']) : '') + '</div>' : ''}
          </div>
        `;
        list.appendChild(item);
      });

      const eggsCount = (state.eggs || []).length;
      const eggsElem = document.createElement('div');
      eggsElem.style.marginTop = '12px';
      eggsElem.style.fontWeight = '600';
      eggsElem.textContent = `–ü–∞—Å—Ö–∞–ª–∫–∏: ${eggsCount} / 3`;
      list.appendChild(eggsElem);

      const visitsElem = document.createElement('div');
      visitsElem.style.marginTop = '10px';
      visitsElem.style.fontWeight = '600';
      visitsElem.textContent = `–ü–æ—Å–µ—â–µ–Ω–∏—è: ${visits}`;
      list.appendChild(visitsElem);
    }

    (function ensureDatesSaved() {
      const state = safeGet('achievementsState', { visited100:false, found3eggs:false, eggs:[], dates:{} });
      state.dates = state.dates || {};
      if (state.visited100 && !state.dates.visited100) state.dates.visited100 = new Date().toLocaleString();
      if (state.found3eggs && !state.dates.found3eggs) state.dates.found3eggs = new Date().toLocaleString();
      safeSet('achievementsState', state);
    })();

    // init
    showSectionById('main-scene');
    populateAchievements();
    (function notifyExisting() {
      const s = safeGet('achievementsState', { visited100:false, found3eggs:false, eggs:[], dates:{} });
      if (s.visited100) showToast('‚úî –£ –≤–∞—Å –µ—Å—Ç—å: –ø–æ—Å–µ—Ç–∏–ª —Å–∞–π—Ç 100 —Ä–∞–∑', 2000);
      if (s.found3eggs) showToast('‚úî –£ –≤–∞—Å –µ—Å—Ç—å: –Ω–∞—à—ë–ª 3 –ø–∞—Å—Ö–∞–ª–∫–∏', 2000);
    })();

    (function watchStateChanges() {
      setInterval(() => {
        const s = safeGet('achievementsState', { visited100:false, found3eggs:false, eggs:[], dates:{} });
        if (!s.dates) s.dates = {};
        if (s.visited100 && !s.dates.visited100) { s.dates.visited100 = new Date().toLocaleString(); safeSet('achievementsState', s); }
        if (s.found3eggs && !s.dates.found3eggs) { s.dates.found3eggs = new Date().toLocaleString(); safeSet('achievementsState', s); }
      }, 2000);
    })();

    // Reset storage
    document.getElementById('reset-storage')?.addEventListener('click', () => {
      if (!confirm('–°–±—Ä–æ—Å–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Å–µ—â–µ–Ω–∏—è –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)?')) return;
      try { localStorage.removeItem('visits'); localStorage.removeItem('achievementsState'); } catch(e){}
      showToast('–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 3000);
    });

    // ensure suggestions render when page loaded (but keep info hidden until user opens it)
    document.addEventListener('DOMContentLoaded', () => {
      // Pre-render suggestions count for local (if any)
      const countEl = document.getElementById('suggestionsCount');
      if (countEl) countEl.textContent = safeGet(SUG_KEY, []).length;
      // render suggestions only when info opened to avoid visual rerender costs; renderLocalSuggestions called by renderSuggestions()
    });

    // ----------------- Typing animation & Particles (kept) -----------------
    // Countdown
    const countdownEl = document.getElementById('countdown');
    const timeSinceEl = document.getElementById('time-since-season');
    const seasonEnd = new Date('2024-12-11T00:00:00Z');
    function updateCountdown() {
      const now = new Date();
      let diff = now - seasonEnd;
      if (diff < 0) diff = 0;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);
      if (timeSinceEl) timeSinceEl.textContent = `${days} –¥–Ω. ${hours} —á. ${minutes} –º–∏–Ω.`;
      if (countdownEl) countdownEl.textContent = `${days} : ${hours.toString().padStart(2,'0')} : ${minutes.toString().padStart(2,'0')} : ${seconds.toString().padStart(2,'0')}`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Typing animation
    const typingTextEl = document.getElementById('typing-text');
    const infoMessages = [
      "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Å–∞–π—Ç Sheyd ‚Äî –≤–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.",
      "–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –≤–∞–∂–Ω–æ–µ!",
      "–ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ –Ω–∞—à–∏–º —Å–æ–æ–±—â–µ—Å—Ç–≤–∞–º –≤ Discord, YouTube –∏ Telegram.",
    ];
    let typingIndex = 0, charIndex = 0, isTyping = false;
    function startTypingAnimation() {
      if (isTyping || !typingTextEl) return;
      isTyping = true;
      function type() {
        if (charIndex < infoMessages[typingIndex].length) {
          typingTextEl.textContent += infoMessages[typingIndex].charAt(charIndex++);
          setTimeout(type, 50);
        } else {
          setTimeout(erase, 1800);
        }
      }
      function erase() {
        if (charIndex > 0) {
          typingTextEl.textContent = infoMessages[typingIndex].substring(0, --charIndex);
          setTimeout(erase, 30);
        } else {
          typingIndex = (typingIndex + 1) % infoMessages.length;
          setTimeout(type, 300);
        }
      }
      typingTextEl.textContent = '';
      charIndex = 0;
      type();
    }

    // Particles (light)
    const particlesCanvas = document.getElementById('particles-canvas');
    const particlesCtx = particlesCanvas && particlesCanvas.getContext ? particlesCanvas.getContext('2d') : null;
    let particleArray = [];
    function resizeParticlesCanvas() {
      if (!particlesCanvas) return;
      particlesCanvas.width = window.innerWidth;
      particlesCanvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeParticlesCanvas);
    resizeParticlesCanvas();
    class Particle {
      constructor(){ this.reset() }
      reset(){ this.x=Math.random()*particlesCanvas.width; this.y=Math.random()*-particlesCanvas.height; this.size=Math.random()*3+0.6; this.speedY=Math.random()*1.6+0.4; this.speedX=(Math.random()-0.5)*0.4 }
      update(){ this.y+=this.speedY; this.x+=this.speedX; if(this.y>particlesCanvas.height) this.reset() }
      draw(){ if(!particlesCtx) return; particlesCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--particle-color'); particlesCtx.beginPath(); particlesCtx.arc(this.x,this.y,this.size,0,Math.PI*2); particlesCtx.fill() }
    }
    function initParticles(){ if(!particlesCanvas) return; particleArray=[]; for(let i=0;i<80;i++) particleArray.push(new Particle()) }
    function animateParticles(){ if(!particlesCtx||!particlesCanvas) return; particlesCtx.clearRect(0,0,particlesCanvas.width,particlesCanvas.height); particleArray.forEach(p=>{ p.update(); p.draw(); }); requestAnimationFrame(animateParticles) }
    initParticles(); animateParticles();

  </script>
</body>
</html>
